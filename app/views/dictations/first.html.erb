<script type="text/javascript" src="/assets/jquery.jqtransform.js"></script>
<link href="/assets/jqtransform.css" rel="stylesheet" type="text/css"/>
<script language="javascript">
  $(function(){
    $('.select_box').jqTransform();
    $(".select_tm").hide();
    $(".select_tm").first().show().find("select").attr("disabled", "disabled");
  });
</script>
<div class="wrap">
  <div class="login_bg">
    <!-- 第一步 选科目 -->
    <div class="tab tab500" id="first_step">
      <a href="javascript:void(0);" class="close">close</a>
      <div class="tab_head">创建班级</div>
      <div class="tab_body clearAfter" style="overflow-y:inherit;">
        <div class="tab_setClass">
          <div class="tab_setClass_step">
            <h2>1.首先请选择你所执教的科目</h2>
            <p class="step_one">第一步</p>
          </div>
          <ul>
            <li>
              <div class="select_box">
                <div class="rowElem selectPosition">
                  <select name="course_id" onchange="showTeachMaterial(this)">
                    <option value="opt1">选择科目</option>
                    <% @courses.each do |course| %>
                      <option value="<%= course.id%>"><%= course.name %></option>
                    <% end %>
                  </select>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="tab_btn"><button type="button" onclick="setCourse(this)">下一步</button></div>
      </div>
    </div>

    <!-- 第二步 选教材 -->
    <div class="tab tab500" id="second_step">
      <%= render :partial => "select_tm" %>
    </div>
    
    <!-- 添加教材 -->
    <div class="tab tab500" id="add_teaching_material">
      <a href="javascript:void(0);" class="close">close</a>
      <div class="tab_head">添加教材</div>
      <div class="tab_body clearAfter" style="overflow-y:inherit;">
        <div class="tab_setClass">
          <div class="tab_setClass_step">
            <h2>添加教材</h2>
          </div>
          <ul>
            <li>
              <input name="teaching_material_name" class="tm_name" placeholder="教材名称"/>
            </li>
          </ul>
        </div>
        <div class="tab_btn"><button type="button" onclick="saveTM(this)">完成</button></div>
      </div>
    </div>

    <!-- 第三步 名称，截止时间 -->
    <%= form_tag({:controller => :welcome, :action => :create_first_class}, :remote => true) do %>
      <div class="tab tab500" id="third_step">
        <a href="javascript:void(0);" class="close">close</a>
        <div class="tab_head">创建班级</div>
        <div class="tab_body clearAfter">
          <div class="tab_setClass">
            <div class="tab_setClass_step">
              <h2>1.请为班级取名字</h2>
              <p class="step_three">第三步</p>
            </div>
            <ul>
              <li> <input id="class_name" name="class_name" type="text" placeholder="班级名称" /></li>
              <li>
                <input id="period_of_validity" name="period_of_validity" placeholder="选择结束时间" readonly="readonly"  type="text" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',autoPickDate:true,minDate:'%y-%M-%d'})" />
              </li>
            </ul>
            <input type="hidden" id="class_course_id" name="class_course_id"/>
            <input type="hidden" id="class_tm_id" name="teaching_material_id"/>
            <input type="hidden" id="class_types" name="class_types" value="1"/>
            <input type="hidden" id="from_dictation" name="from_dictation" value="1"/>
          </div>
          <div class="tab_btn"><button type="button" onclick="check_class_info(this);">确定</button></div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
  $(document).ready(function(){
    popup("#first_step");
  })
</script>